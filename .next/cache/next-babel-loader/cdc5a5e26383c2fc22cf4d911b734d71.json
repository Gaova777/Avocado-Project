{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Juan Diego\\\\Documents\\\\Escuela de desarrollo web\\\\Next JS\\\\proyecto Avocado\\\\components\\\\ProductSummary\\\\AddToCart.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { Input, Icon, Transition } from 'semantic-ui-react';\nimport { useCartMutations } from '@store/Cart';\n// Fake a server Response, we don't care on this project\n// about data persistency, but you may add it :)\nconst addToCartRequest = () => new Promise((resolve, reject) => {\n  window.setTimeout(resolve, 600);\n});\nconst validate = quantity => {\n  let error = '';\n  if (quantity < 1) error = \"Can't be blank\";\n  return error;\n};\nconst AddToCart = ({\n  product\n}) => {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState('');\n  const {\n    0: quantity,\n    1: setQuantity\n  } = useState(1);\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    addToCart\n  } = useCartMutations();\n  const toggleMessage = () => {\n    setTimeout(() => {\n      setVisible(false);\n    }, 1000);\n  };\n  const handleSubmit = async () => {\n    const error = validate(quantity);\n    setError(error);\n    if (!error) {\n      setLoading(true);\n      addToCartRequest().then(() => {\n        addToCart(product, quantity);\n        setLoading(false);\n        setQuantity(quantity);\n        setVisible(true);\n        toggleMessage();\n      }).catch(err => {\n        setError(`Error: ${err}` || 'Something went wrong');\n        setLoading(false);\n      });\n    }\n  };\n  const handleChange = ({\n    target\n  }) => setQuantity(parseInt(target.value, 10));\n  return __jsx(React.Fragment, null, __jsx(Input, {\n    type: \"number\",\n    placeholder: \"Quantity\",\n    value: quantity,\n    min: 1,\n    step: 1,\n    error: !!error,\n    onChange: handleChange,\n    action: {\n      color: 'green',\n      content: 'Add to Cart',\n      icon: 'plus cart',\n      onClick: handleSubmit,\n      loading,\n      disabled: loading\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), error && __jsx(\"div\", {\n    style: {\n      color: 'red',\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, error), __jsx(Transition, {\n    duration: {\n      hide: 500,\n      show: 500\n    },\n    visible: visible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    style: {\n      color: 'green',\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    name: \"check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }), \"Added to cart\")));\n};\nexport default AddToCart;","map":{"version":3,"names":["React","useState","Input","Icon","Transition","useCartMutations","addToCartRequest","Promise","resolve","reject","window","setTimeout","validate","quantity","error","AddToCart","product","loading","setLoading","setError","setQuantity","visible","setVisible","addToCart","toggleMessage","handleSubmit","then","catch","err","handleChange","target","parseInt","value","color","content","icon","onClick","disabled","position","hide","show"],"sources":["C:/Users/Juan Diego/Documents/Escuela de desarrollo web/Next JS/proyecto Avocado/components/ProductSummary/AddToCart.tsx"],"sourcesContent":["import React, { useState, useContext } from 'react'\r\nimport { Input, Icon, Transition } from 'semantic-ui-react'\r\nimport { useCartMutations } from '@store/Cart'\r\n\r\ntype AddToCartProps = {\r\n  product: TProduct\r\n}\r\n\r\n// Fake a server Response, we don't care on this project\r\n// about data persistency, but you may add it :)\r\nconst addToCartRequest = () =>\r\n  new Promise((resolve, reject) => {\r\n    window.setTimeout(resolve, 600)\r\n  })\r\n\r\nconst validate = (quantity: number) => {\r\n  let error = ''\r\n  if (quantity < 1) error = \"Can't be blank\"\r\n\r\n  return error\r\n}\r\n\r\nconst AddToCart = ({ product }: AddToCartProps) => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n  const [quantity, setQuantity] = useState(1)\r\n  const [visible, setVisible] = useState(false)\r\n  const { addToCart } = useCartMutations()\r\n\r\n  const toggleMessage = () => {\r\n    setTimeout(() => {\r\n      setVisible(false)\r\n    }, 1000)\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    const error = validate(quantity)\r\n    setError(error)\r\n\r\n    if (!error) {\r\n      setLoading(true)\r\n      addToCartRequest()\r\n        .then(() => {\r\n          addToCart(product, quantity)\r\n          setLoading(false)\r\n          setQuantity(quantity)\r\n          setVisible(true)\r\n          toggleMessage()\r\n        })\r\n        .catch((err: Error) => {\r\n          setError(`Error: ${err}` || 'Something went wrong')\r\n          setLoading(false)\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleChange = ({ target }: React.ChangeEvent<HTMLInputElement>) =>\r\n    setQuantity(parseInt(target.value, 10))\r\n\r\n  return (\r\n    <>\r\n      <Input\r\n        type=\"number\"\r\n        placeholder=\"Quantity\"\r\n        value={quantity}\r\n        min={1}\r\n        step={1}\r\n        error={!!error}\r\n        onChange={handleChange}\r\n        action={{\r\n          color: 'green',\r\n          content: 'Add to Cart',\r\n          icon: 'plus cart',\r\n          onClick: handleSubmit,\r\n          loading,\r\n          disabled: loading,\r\n        }}\r\n      />\r\n      {error && (\r\n        <div style={{ color: 'red', position: 'absolute' }}>{error}</div>\r\n      )}\r\n      <Transition duration={{ hide: 500, show: 500 }} visible={visible}>\r\n        <div style={{ color: 'green', position: 'absolute' }}>\r\n          <Icon name=\"check\" />\r\n          Added to cart\r\n        </div>\r\n      </Transition>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AddToCart\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}