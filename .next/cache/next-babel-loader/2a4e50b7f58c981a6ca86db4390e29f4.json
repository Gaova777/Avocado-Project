{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Juan Diego\\\\Documents\\\\Escuela de desarrollo web\\\\Next JS\\\\proyecto Avocado\\\\store\\\\Cart.tsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport React, { useContext, useReducer } from 'react';\nconst defaultState = {};\nconst CartItemsContext = /*#__PURE__*/React.createContext(defaultState);\nconst CartDispatchContext = /*#__PURE__*/React.createContext(() => {});\nconst CartProvider = ({\n  children\n}) => {\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(cartReducers, defaultState);\n  return __jsx(CartItemsContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }\n  }, __jsx(CartDispatchContext.Provider, {\n    value: dispatch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }, children));\n};\nfunction cartReducers(state, {\n  item,\n  type,\n  quantity: qtyToAdd = 1\n}) {\n  const existingCartItem = state[item.id];\n  switch (type) {\n    case 'add':\n      {\n        if (existingCartItem != undefined) {\n          const quantity = existingCartItem.quantity + qtyToAdd;\n          return _objectSpread(_objectSpread({}, state), {}, {\n            [item.id]: _objectSpread(_objectSpread({}, existingCartItem), {}, {\n              quantity\n            })\n          });\n        }\n        return _objectSpread(_objectSpread({}, state), {}, {\n          [item.id]: _objectSpread(_objectSpread({}, item), {}, {\n            quantity: qtyToAdd\n          })\n        });\n      }\n    case 'remove':\n      {\n        if (existingCartItem == undefined) {\n          return state;\n        }\n        const quantity = existingCartItem.quantity - 1;\n        if (quantity > 0) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            [item.id]: _objectSpread(_objectSpread({}, existingCartItem), {}, {\n              quantity\n            })\n          });\n        }\n        const newCartItems = _objectSpread({}, state);\n        delete newCartItems[item.id];\n        return newCartItems;\n      }\n    default:\n      {\n        throw new Error(`Unhandled action type: ${type}`);\n      }\n  }\n}\nconst getCartSubTotal = (sum, item) => {\n  sum += item.price * item.quantity;\n  return sum;\n};\nconst getCartCount = (sum, item) => sum + item.quantity;\n/**\r\n * Hey there insatiably brain,\r\n * Are you interested in this pattern where the Context values are\r\n * exposed without actually provinding access to the Context itself :)\r\n * https://kentcdodds.com/blog/how-to-use-react-context-effectively\r\n */\nexport const useCart = () => {\n  const itemsById = useContext(CartItemsContext);\n  const items = Object.values(itemsById);\n  // Not familiar with Array.reduce? :)\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\n  const count = items.reduce(getCartCount, 0);\n  const subTotal = items.reduce(getCartSubTotal, 0);\n  return {\n    items,\n    itemsById,\n    count,\n    subTotal\n  };\n};\nexport const useCartMutations = () => {\n  const dispatch = useContext(CartDispatchContext);\n  const addToCart = (product, quantity) => dispatch({\n    type: 'add',\n    item: product,\n    quantity\n  });\n  const removeFromCart = product => dispatch({\n    type: 'remove',\n    item: product\n  });\n  return {\n    addToCart,\n    removeFromCart\n  };\n};\nexport default CartProvider;","map":{"version":3,"names":["React","useContext","useReducer","defaultState","CartItemsContext","createContext","CartDispatchContext","CartProvider","children","state","dispatch","cartReducers","item","type","quantity","qtyToAdd","existingCartItem","id","undefined","newCartItems","Error","getCartSubTotal","sum","price","getCartCount","useCart","itemsById","items","Object","values","count","reduce","subTotal","useCartMutations","addToCart","product","removeFromCart"],"sources":["C:/Users/Juan Diego/Documents/Escuela de desarrollo web/Next JS/proyecto Avocado/store/Cart.tsx"],"sourcesContent":["import React, { Dispatch, useContext, useReducer } from 'react'\r\n\r\nexport type CartItemType = TProduct & { quantity: number }\r\n\r\nexport type CartState = {\r\n  [key: string]: CartItemType\r\n}\r\n\r\nexport type CartAction = {\r\n  type: 'add' | 'remove'\r\n  item: TProduct\r\n  quantity?: number\r\n}\r\n\r\nconst defaultState = {} as CartState\r\n\r\nconst CartItemsContext = React.createContext(defaultState)\r\nconst CartDispatchContext = React.createContext((() => {}) as Dispatch<\r\n  CartAction\r\n>)\r\n\r\nconst CartProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [state, dispatch] = useReducer(cartReducers, defaultState)\r\n\r\n  return (\r\n    <CartItemsContext.Provider value={state}>\r\n      <CartDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </CartDispatchContext.Provider>\r\n    </CartItemsContext.Provider>\r\n  )\r\n}\r\n\r\nfunction cartReducers(\r\n  state: CartState,\r\n  { item, type, quantity: qtyToAdd = 1 }: CartAction\r\n) {\r\n  const existingCartItem = state[item.id]\r\n\r\n  switch (type) {\r\n    case 'add': {\r\n      if (existingCartItem != undefined) {\r\n        const quantity = existingCartItem.quantity + qtyToAdd\r\n        return {\r\n          ...state,\r\n          [item.id]: {\r\n            ...existingCartItem,\r\n            quantity,\r\n          },\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        [item.id]: {\r\n          ...item,\r\n          quantity: qtyToAdd,\r\n        },\r\n      }\r\n    }\r\n\r\n    case 'remove': {\r\n      if (existingCartItem == undefined) {\r\n        return state\r\n      }\r\n\r\n      const quantity = existingCartItem.quantity - 1\r\n      if (quantity > 0) {\r\n        return {\r\n          ...state,\r\n          [item.id]: {\r\n            ...existingCartItem,\r\n            quantity,\r\n          },\r\n        }\r\n      }\r\n\r\n      const newCartItems = { ...state }\r\n      delete newCartItems[item.id]\r\n      return newCartItems\r\n    }\r\n\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${type}`)\r\n    }\r\n  }\r\n}\r\n\r\nconst getCartSubTotal = (sum: number, item: CartItemType) => {\r\n  sum += item.price * item.quantity\r\n  return sum\r\n}\r\nconst getCartCount = (sum: number, item: CartItemType) => sum + item.quantity\r\n/**\r\n * Hey there insatiably brain,\r\n * Are you interested in this pattern where the Context values are\r\n * exposed without actually provinding access to the Context itself :)\r\n * https://kentcdodds.com/blog/how-to-use-react-context-effectively\r\n */\r\nexport const useCart = () => {\r\n  const itemsById = useContext(CartItemsContext)\r\n  const items = Object.values(itemsById)\r\n  // Not familiar with Array.reduce? :)\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\r\n  const count = items.reduce(getCartCount, 0)\r\n  const subTotal = items.reduce(getCartSubTotal, 0)\r\n\r\n  return {\r\n    items,\r\n    itemsById,\r\n    count,\r\n    subTotal,\r\n  }\r\n}\r\nexport const useCartMutations = () => {\r\n  const dispatch = useContext(CartDispatchContext)\r\n\r\n  const addToCart = (product: TProduct, quantity?: number) =>\r\n    dispatch({\r\n      type: 'add',\r\n      item: product,\r\n      quantity,\r\n    })\r\n\r\n  const removeFromCart = (product: TProduct) =>\r\n    dispatch({\r\n      type: 'remove',\r\n      item: product,\r\n    })\r\n\r\n  return {\r\n    addToCart,\r\n    removeFromCart,\r\n  }\r\n}\r\n\r\nexport default CartProvider\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}